<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios de Regresión - Soluciones Completas</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 300;
        }

        .exercise {
            padding: 30px;
            border-bottom: 2px solid #ecf0f1;
        }

        .exercise:last-child {
            border-bottom: none;
        }

        .exercise-title {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            display: inline-block;
        }

        .data-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }

        .solution-section {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #27ae60;
        }

        .manual-solution {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #ffc107;
        }

        .code-section {
            background: #f1f3f4;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #6c757d;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .chart-container {
            width: 100%;
            height: 400px;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #2980b9;
        }

        .btn-success {
            background: #27ae60;
        }

        .btn-success:hover {
            background: #219a52;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .results-table th {
            background: #3498db;
            color: white;
            padding: 15px;
            text-align: left;
        }

        .results-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ecf0f1;
        }

        .results-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .math-formula {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 2px solid #e9ecef;
            font-family: 'Times New Roman', serif;
            font-size: 18px;
            text-align: center;
        }

        .step {
            margin: 15px 0;
            padding: 15px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .step-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 8px 8px 0 0;
            margin: 20px 0 0 0;
        }

        .nav-tab {
            padding: 15px 25px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            margin-right: 2px;
            transition: background 0.3s;
        }

        .nav-tab.active {
            background: white;
            border-bottom: 2px solid #3498db;
        }

        .tab-content {
            background: white;
            padding: 25px;
            border-radius: 0 8px 8px 8px;
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ejercicios de Regresión</h1>
            <p>Soluciones Manuales y Código Python</p>
        </div>

        <!-- Ejercicio 1: Regresión Lineal -->
        <div class="exercise" id="exercise1">
            <h2 class="exercise-title">Ejercicio 1: Regresión Lineal</h2>
            
            <div class="data-section">
                <h3>📊 Datos del Problema</h3>
                <p><strong>Contexto:</strong> Un ingeniero mide la temperatura de un horno en función del tiempo.</p>
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Tiempo (min)</th>
                            <th>Temperatura (°C)</th>
                        </tr>
                    </thead>
                    <tbody id="data1">
                        <tr><td>0</td><td>20</td></tr>
                        <tr><td>5</td><td>45</td></tr>
                        <tr><td>10</td><td>70</td></tr>
                        <tr><td>15</td><td>95</td></tr>
                        <tr><td>20</td><td>120</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('manual1', this)">Solución Manual</button>
                <button class="nav-tab" onclick="showTab('python1', this)">Código Python</button>
                <button class="nav-tab" onclick="showTab('graph1', this)">Gráfico</button>
            </div>

            <div id="manual1" class="tab-content active">
                <div class="manual-solution">
                    <h3>🧮 Solución Manual - Regresión Lineal</h3>
                    
                    <div class="step">
                        <div class="step-title">Paso 1: Modelo de regresión lineal</div>
                        <div class="math-formula">y = a + bx</div>
                        <p>Donde necesitamos encontrar los coeficientes <span class="highlight">a</span> (intercepto) y <span class="highlight">b</span> (pendiente).</p>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 2: Fórmulas de mínimos cuadrados</div>
                        <div class="math-formula">
                            b = (n∑xy - ∑x∑y) / (n∑x² - (∑x)²)<br><br>
                            a = (∑y - b∑x) / n
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 3: Cálculos</div>
                        <table class="results-table">
                            <thead>
                                <tr><th>x</th><th>y</th><th>x²</th><th>xy</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>20</td><td>0</td><td>0</td></tr>
                                <tr><td>5</td><td>45</td><td>25</td><td>225</td></tr>
                                <tr><td>10</td><td>70</td><td>100</td><td>700</td></tr>
                                <tr><td>15</td><td>95</td><td>225</td><td>1425</td></tr>
                                <tr><td>20</td><td>120</td><td>400</td><td>2400</td></tr>
                                <tr style="background: #3498db; color: white; font-weight: bold;">
                                    <td>∑x = 50</td><td>∑y = 350</td><td>∑x² = 750</td><td>∑xy = 4750</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <p><strong>n = 5</strong></p>
                        
                        <div class="math-formula">
                            b = (5×4750 - 50×350) / (5×750 - 50²)<br>
                            b = (23750 - 17500) / (3750 - 2500)<br>
                            b = 6250 / 1250 = <span class="highlight">5</span>
                        </div>
                        
                        <div class="math-formula">
                            a = (350 - 5×50) / 5<br>
                            a = (350 - 250) / 5<br>
                            a = 100 / 5 = <span class="highlight">20</span>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 4: Ecuación del modelo</div>
                        <div class="math-formula">y = 20 + 5x</div>
                        <p><strong>Temperatura = 20 + 5 × Tiempo</strong></p>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 5: Coeficiente de determinación R²</div>
                        <p>Calculamos R² para evaluar la bondad del ajuste:</p>
                        <div id="r2-calc1">
                            <p><strong>R² = 1 - (SSres / SStot)</strong></p>
                            <p>Donde SSres es la suma de cuadrados residuales y SStot es la suma total de cuadrados.</p>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 6: Estimación a los 25 minutos</div>
                        <div class="math-formula">
                            y = 20 + 5(25) = 20 + 125 = <span class="highlight">145°C</span>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 7: Comentarios sobre el modelo</div>
                        <p>El modelo lineal es <strong>muy adecuado</strong> para estos datos porque:</p>
                        <ul>
                            <li>Los puntos siguen una tendencia claramente lineal</li>
                            <li>R² es muy cercano a 1, indicando un excelente ajuste</li>
                            <li>La relación temperatura-tiempo es físicamente coherente</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="python1" class="tab-content">
                <div class="code-section">
                    <h3>🐍 Código Python</h3>
                    <div class="code-block">
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score
import scipy.stats as stats

# Datos del ejercicio 1
tiempo = np.array([0, 5, 10, 15, 20])
temperatura = np.array([20, 45, 70, 95, 120])

# Método manual con fórmulas de mínimos cuadrados
def regresion_lineal_manual(x, y):
    n = len(x)
    sum_x = np.sum(x)
    sum_y = np.sum(y)
    sum_xy = np.sum(x * y)
    sum_x2 = np.sum(x**2)
    
    # Calcular pendiente (b) e intercepto (a)
    b = (n * sum_xy - sum_x * sum_y) / (n * sum_x2 - sum_x**2)
    a = (sum_y - b * sum_x) / n
    
    return a, b

# Calcular regresión manual
a_manual, b_manual = regresion_lineal_manual(tiempo, temperatura)

# Usar sklearn para verificar
X = tiempo.reshape(-1, 1)
modelo = LinearRegression()
modelo.fit(X, temperatura)

# Predicciones
y_pred_manual = a_manual + b_manual * tiempo
y_pred_sklearn = modelo.predict(X)

# Calcular R²
r2_manual = r2_score(temperatura, y_pred_manual)

# Estimación a los 25 minutos
tiempo_25 = 25
temp_25_manual = a_manual + b_manual * tiempo_25
temp_25_sklearn = modelo.predict([[tiempo_25]])[0]

# Resultados
print("=== EJERCICIO 1: REGRESIÓN LINEAL ===")
print(f"Ecuación manual: y = {a_manual:.2f} + {b_manual:.2f}x")
print(f"Ecuación sklearn: y = {modelo.intercept_:.2f} + {modelo.coef_[0]:.2f}x")
print(f"R² = {r2_manual:.4f}")
print(f"Temperatura a los 25 min: {temp_25_manual:.1f}°C")

# Crear gráfico
plt.figure(figsize=(10, 6))
plt.scatter(tiempo, temperatura, color='red', s=100, label='Datos observados', zorder=5)
plt.plot(tiempo, y_pred_manual, 'b-', linewidth=2, label=f'y = {a_manual:.1f} + {b_manual:.1f}x')
plt.scatter([tiempo_25], [temp_25_manual], color='green', s=150, 
           label=f'Predicción 25 min: {temp_25_manual:.1f}°C', zorder=5)

plt.xlabel('Tiempo (minutos)')
plt.ylabel('Temperatura (°C)')
plt.title('Ejercicio 1: Regresión Lineal - Temperatura vs Tiempo')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()

# Tabla de resultados
print("\nTabla de cálculos:")
print("x\ty\tx²\txy\ty_pred\tresiduo")
for i in range(len(tiempo)):
    x, y = tiempo[i], temperatura[i]
    y_pred = a_manual + b_manual * x
    residuo = y - y_pred
    print(f"{x}\t{y}\t{x**2}\t{x*y}\t{y_pred:.1f}\t{residuo:.1f}")
                    </div>
                </div>
            </div>

            <div id="graph1" class="tab-content">
                <div class="chart-container">
                    <canvas id="chart1"></canvas>
                </div>
                <button class="btn btn-success" onclick="generateChart1()">Generar Gráfico</button>
                <div id="results1" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Ejercicio 2: Regresión Logarítmica -->
        <div class="exercise" id="exercise2">
            <h2 class="exercise-title">Ejercicio 2: Regresión Logarítmica</h2>
            
            <div class="data-section">
                <h3>📊 Datos del Problema</h3>
                <p><strong>Contexto:</strong> Se mide la concentración de un reactivo en función del tiempo.</p>
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Tiempo (min)</th>
                            <th>Concentración (mol/L)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>3.2</td></tr>
                        <tr><td>2</td><td>2.8</td></tr>
                        <tr><td>4</td><td>2.3</td></tr>
                        <tr><td>6</td><td>2.0</td></tr>
                        <tr><td>8</td><td>1.8</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('manual2', this)">Solución Manual</button>
                <button class="nav-tab" onclick="showTab('python2', this)">Código Python</button>
                <button class="nav-tab" onclick="showTab('graph2', this)">Gráfico</button>
            </div>

            <div id="manual2" class="tab-content active">
                <div class="manual-solution">
                    <h3>🧮 Solución Manual - Regresión Logarítmica</h3>
                    
                    <div class="step">
                        <div class="step-title">Paso 1: Modelo logarítmico</div>
                        <div class="math-formula">y = a + b·ln(x)</div>
                        <p>Para linearizar, hacemos la transformación: <span class="highlight">X = ln(x)</span></p>
                        <p>Entonces: <span class="highlight">y = a + b·X</span></p>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 2: Transformación de datos</div>
                        <table class="results-table">
                            <thead>
                                <tr><th>x</th><th>y</th><th>X = ln(x)</th><th>X²</th><th>X·y</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>1</td><td>3.2</td><td>0.000</td><td>0.000</td><td>0.000</td></tr>
                                <tr><td>2</td><td>2.8</td><td>0.693</td><td>0.481</td><td>1.941</td></tr>
                                <tr><td>4</td><td>2.3</td><td>1.386</td><td>1.921</td><td>3.188</td></tr>
                                <tr><td>6</td><td>2.0</td><td>1.792</td><td>3.211</td><td>3.584</td></tr>
                                <tr><td>8</td><td>1.8</td><td>2.079</td><td>4.323</td><td>3.742</td></tr>
                                <tr style="background: #3498db; color: white; font-weight: bold;">
                                    <td></td><td>∑y = 12.1</td><td>∑X = 5.950</td><td>∑X² = 9.936</td><td>∑Xy = 12.455</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 3: Cálculo de coeficientes</div>
                        <p><strong>n = 5</strong></p>
                        
                        <div class="math-formula">
                            b = (n∑Xy - ∑X∑y) / (n∑X² - (∑X)²)<br>
                            b = (5×12.455 - 5.950×12.1) / (5×9.936 - 5.950²)<br>
                            b = (62.275 - 71.995) / (49.68 - 35.403)<br>
                            b = -9.72 / 14.277 = <span class="highlight">-0.681</span>
                        </div>
                        
                        <div class="math-formula">
                            a = (∑y - b∑X) / n<br>
                            a = (12.1 - (-0.681)×5.950) / 5<br>
                            a = (12.1 + 4.052) / 5<br>
                            a = 16.152 / 5 = <span class="highlight">3.230</span>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 4: Ecuación del modelo</div>
                        <div class="math-formula">y = 3.230 - 0.681·ln(x)</div>
                        <p><strong>Concentración = 3.230 - 0.681 × ln(Tiempo)</strong></p>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 5: Estimación a los 10 minutos</div>
                        <div class="math-formula">
                            y = 3.230 - 0.681·ln(10)<br>
                            y = 3.230 - 0.681×2.303<br>
                            y = 3.230 - 1.568 = <span class="highlight">1.662 mol/L</span>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 6: Validez del modelo</div>
                        <p>El modelo logarítmico es <strong>adecuado</strong> porque:</p>
                        <ul>
                            <li>Representa bien el decaimiento de concentración típico en reacciones químicas</li>
                            <li>Los residuos son pequeños y sin patrón sistemático</li>
                            <li>Físicamente coherente: la concentración disminuye más rápidamente al inicio</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="python2" class="tab-content">
                <div class="code-section">
                    <h3>🐍 Código Python</h3>
                    <div class="code-block">
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score

# Datos del ejercicio 2
tiempo = np.array([1, 2, 4, 6, 8])
concentracion = np.array([3.2, 2.8, 2.3, 2.0, 1.8])

# Transformación logarítmica
ln_tiempo = np.log(tiempo)

# Regresión logarítmica manual
def regresion_logaritmica_manual(x, y):
    ln_x = np.log(x)
    n = len(x)
    sum_lnx = np.sum(ln_x)
    sum_y = np.sum(y)
    sum_lnx_y = np.sum(ln_x * y)
    sum_lnx2 = np.sum(ln_x**2)
    
    # Calcular coeficientes
    b = (n * sum_lnx_y - sum_lnx * sum_y) / (n * sum_lnx2 - sum_lnx**2)
    a = (sum_y - b * sum_lnx) / n
    
    return a, b

# Calcular regresión manual
a_manual, b_manual = regresion_logaritmica_manual(tiempo, concentracion)

# Usar sklearn con datos transformados
X_transformed = ln_tiempo.reshape(-1, 1)
modelo_log = LinearRegression()
modelo_log.fit(X_transformed, concentracion)

# Predicciones
y_pred_manual = a_manual + b_manual * ln_tiempo
y_pred_sklearn = modelo_log.predict(X_transformed)

# Calcular R²
r2_log = r2_score(concentracion, y_pred_manual)

# Estimación a los 10 minutos
tiempo_10 = 10
ln_tiempo_10 = np.log(tiempo_10)
conc_10_manual = a_manual + b_manual * ln_tiempo_10
conc_10_sklearn = modelo_log.predict([[ln_tiempo_10]])[0]

# Resultados
print("=== EJERCICIO 2: REGRESIÓN LOGARÍTMICA ===")
print(f"Ecuación manual: y = {a_manual:.3f} + {b_manual:.3f}*ln(x)")
print(f"Ecuación sklearn: y = {modelo_log.intercept_:.3f} + {modelo_log.coef_[0]:.3f}*ln(x)")
print(f"R² = {r2_log:.4f}")
print(f"Concentración a los 10 min: {conc_10_manual:.3f} mol/L")

# Crear gráfico
plt.figure(figsize=(12, 5))

# Gráfico original
plt.subplot(1, 2, 1)
plt.scatter(tiempo, concentracion, color='red', s=100, label='Datos observados', zorder=5)

# Curva suave para la regresión logarítmica
tiempo_smooth = np.linspace(0.5, 10, 100)
conc_smooth = a_manual + b_manual * np.log(tiempo_smooth)
plt.plot(tiempo_smooth, conc_smooth, 'b-', linewidth=2, 
         label=f'y = {a_manual:.3f} + {b_manual:.3f}ln(x)')

plt.scatter([tiempo_10], [conc_10_manual], color='green', s=150, 
           label=f'Predicción 10 min: {conc_10_manual:.3f} mol/L', zorder=5)

plt.xlabel('Tiempo (minutos)')
plt.ylabel('Concentración (mol/L)')
plt.title('Regresión Logarítmica - Datos Originales')
plt.legend()
plt.grid(True, alpha=0.3)

# Gráfico linearizado
plt.subplot(1, 2, 2)
plt.scatter(ln_tiempo, concentracion, color='red', s=100, label='Datos transformados', zorder=5)
plt.plot(ln_tiempo, y_pred_manual, 'b-', linewidth=2, label='Regresión lineal')

plt.xlabel('ln(Tiempo)')
plt.ylabel('Concentración (mol/L)')
plt.title('Datos Linearizados')
plt.legend()
plt.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()

# Tabla de resultados
print("\nTabla de cálculos:")
print("x\ty\tln(x)\tln(x)²\tln(x)*y\ty_pred\tresiduo")
for i in range(len(tiempo)):
    x, y = tiempo[i], concentracion[i]
    ln_x = np.log(x)
    y_pred = a_manual + b_manual * ln_x
    residuo = y - y_pred
    print(f"{x}\t{y}\t{ln_x:.3f}\t{ln_x**2:.3f}\t{ln_x*y:.3f}\t{y_pred:.3f}\t{residuo:.3f}")
                    </div>
                </div>
            </div>

            <div id="graph2" class="tab-content">
                <div class="chart-container">
                    <canvas id="chart2"></canvas>
                </div>
                <button class="btn btn-success" onclick="generateChart2()">Generar Gráfico</button>
                <div id="results2" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Ejercicio 3: Regresión Exponencial -->
        <div class="exercise" id="exercise3">
            <h2 class="exercise-title">Ejercicio 3: Regresión Exponencial</h2>
            
            <div class="data-section">
                <h3>📊 Datos del Problema</h3>
                <p><strong>Contexto:</strong> Un proceso de enfriamiento sigue una tendencia exponencial.</p>
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Tiempo (min)</th>
                            <th>Temperatura (°C)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>0</td><td>100</td></tr>
                        <tr><td>2</td><td>81.9</td></tr>
                        <tr><td>4</td><td>67.0</td></tr>
                        <tr><td>6</td><td>54.8</td></tr>
                        <tr><td>8</td><td>44.8</td></tr>
                    </tbody>
                </table>
            </div>

            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('manual3', this)">Solución Manual</button>
                <button class="nav-tab" onclick="showTab('python3', this)">Código Python</button>
                <button class="nav-tab" onclick="showTab('graph3', this)">Gráfico</button>
            </div>

            <div id="manual3" class="tab-content active">
                <div class="manual-solution">
                    <h3>🧮 Solución Manual - Regresión Exponencial</h3>
                    
                    <div class="step">
                        <div class="step-title">Paso 1: Modelo exponencial</div>
                        <div class="math-formula">y = a·e^(b·x)</div>
                        <p>Para linearizar, aplicamos logaritmo natural a ambos lados:</p>
                        <div class="math-formula">ln(y) = ln(a) + b·x</div>
                        <p>Hacemos: <span class="highlight">Y = ln(y)</span> y <span class="highlight">A = ln(a)</span></p>
                        <p>Entonces: <span class="highlight">Y = A + b·x</span></p>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 2: Transformación de datos</div>
                        <table class="results-table">
                            <thead>
                                <tr><th>x</th><th>y</th><th>Y = ln(y)</th><th>x²</th><th>x·Y</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>100</td><td>4.605</td><td>0</td><td>0.000</td></tr>
                                <tr><td>2</td><td>81.9</td><td>4.405</td><td>4</td><td>8.810</td></tr>
                                <tr><td>4</td><td>67.0</td><td>4.204</td><td>16</td><td>16.816</td></tr>
                                <tr><td>6</td><td>54.8</td><td>4.003</td><td>36</td><td>24.018</td></tr>
                                <tr><td>8</td><td>44.8</td><td>3.802</td><td>64</td><td>30.416</td></tr>
                                <tr style="background: #3498db; color: white; font-weight: bold;">
                                    <td>∑x = 20</td><td></td><td>∑Y = 21.019</td><td>∑x² = 120</td><td>∑xY = 80.060</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 3: Cálculo de coeficientes</div>
                        <p><strong>n = 5</strong></p>
                        
                        <div class="math-formula">
                            b = (n∑xY - ∑x∑Y) / (n∑x² - (∑x)²)<br>
                            b = (5×80.060 - 20×21.019) / (5×120 - 20²)<br>
                            b = (400.300 - 420.380) / (600 - 400)<br>
                            b = -20.080 / 200 = <span class="highlight">-0.1004</span>
                        </div>
                        
                        <div class="math-formula">
                            A = (∑Y - b∑x) / n<br>
                            A = (21.019 - (-0.1004)×20) / 5<br>
                            A = (21.019 + 2.008) / 5<br>
                            A = 23.027 / 5 = <span class="highlight">4.605</span>
                        </div>
                        
                        <div class="math-formula">
                            a = e^A = e^{4.605} = <span class="highlight">100.0</span>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 4: Ecuación del modelo</div>
                        <div class="math-formula">y = 100.0·e^(-0.1004·x)</div>
                        <p><strong>Temperatura = 100.0 × e^(-0.1004 × Tiempo)</strong></p>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 5: Estimación a los 10 minutos</div>
                        <div class="math-formula">
                            y = 100.0·e^(-0.1004×10)<br>
                            y = 100.0·e^(-1.004)<br>
                            y = 100.0×0.367 = <span class="highlight">36.7°C</span>
                        </div>
                    </div>

                    <div class="step">
                        <div class="step-title">Paso 6: Validez del modelo</div>
                        <p>El modelo exponencial es <strong>muy adecuado</strong> porque:</p>
                        <ul>
                            <li>Representa perfectamente el proceso de enfriamiento exponencial</li>
                            <li>Sigue la Ley de Newton del enfriamiento</li>
                            <li>R² muy cercano a 1 indica excelente ajuste</li>
                            <li>Los residuos son mínimos y aleatorios</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="python3" class="tab-content">
                <div class="code-section">
                    <h3>🐍 Código Python</h3>
                    <div class="code-block">
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score
from scipy.optimize import curve_fit

# Datos del ejercicio 3
tiempo = np.array([0, 2, 4, 6, 8])
temperatura = np.array([100, 81.9, 67.0, 54.8, 44.8])

# Método 1: Regresión exponencial mediante linearización
def regresion_exponencial_manual(x, y):
    # Transformación logarítmica
    ln_y = np.log(y)
    n = len(x)
    sum_x = np.sum(x)
    sum_ln_y = np.sum(ln_y)
    sum_x_ln_y = np.sum(x * ln_y)
    sum_x2 = np.sum(x**2)
    
    # Calcular coeficientes de la forma ln(y) = A + b*x
    b = (n * sum_x_ln_y - sum_x * sum_ln_y) / (n * sum_x2 - sum_x**2)
    A = (sum_ln_y - b * sum_x) / n
    a = np.exp(A)
    
    return a, b

# Calcular regresión manual
a_manual, b_manual = regresion_exponencial_manual(tiempo, temperatura)

# Método 2: Usar sklearn con datos linearizados
ln_temperatura = np.log(temperatura)
X = tiempo.reshape(-1, 1)
modelo_exp = LinearRegression()
modelo_exp.fit(X, ln_temperatura)

a_sklearn = np.exp(modelo_exp.intercept_)
b_sklearn = modelo_exp.coef_[0]

# Método 3: Usar scipy.optimize.curve_fit (no lineal)
def modelo_exponencial(x, a, b):
    return a * np.exp(b * x)

popt, pcov = curve_fit(modelo_exponencial, tiempo, temperatura)
a_scipy, b_scipy = popt

# Predicciones
y_pred_manual = a_manual * np.exp(b_manual * tiempo)
y_pred_sklearn = a_sklearn * np.exp(b_sklearn * tiempo)
y_pred_scipy = modelo_exponencial(tiempo, a_scipy, b_scipy)

# Calcular R² para cada método
r2_manual = r2_score(temperatura, y_pred_manual)
r2_sklearn = r2_score(temperatura, y_pred_sklearn)
r2_scipy = r2_score(temperatura, y_pred_scipy)

# Estimación a los 10 minutos
tiempo_10 = 10
temp_10_manual = a_manual * np.exp(b_manual * tiempo_10)
temp_10_sklearn = a_sklearn * np.exp(b_sklearn * tiempo_10)
temp_10_scipy = modelo_exponencial(tiempo_10, a_scipy, b_scipy)

# Resultados
print("=== EJERCICIO 3: REGRESIÓN EXPONENCIAL ===")
print("\nMétodo 1 - Manual (linearización):")
print(f"Ecuación: y = {a_manual:.3f} * exp({b_manual:.4f} * x)")
print(f"R² = {r2_manual:.6f}")
print(f"Temperatura a los 10 min: {temp_10_manual:.2f}°C")

print("\nMétodo 2 - Sklearn (linearización):")
print(f"Ecuación: y = {a_sklearn:.3f} * exp({b_sklearn:.4f} * x)")
print(f"R² = {r2_sklearn:.6f}")
print(f"Temperatura a los 10 min: {temp_10_sklearn:.2f}°C")

print("\nMétodo 3 - Scipy curve_fit (no lineal):")
print(f"Ecuación: y = {a_scipy:.3f} * exp({b_scipy:.4f} * x)")
print(f"R² = {r2_scipy:.6f}")
print(f"Temperatura a los 10 min: {temp_10_scipy:.2f}°C")

# Crear gráfico comparativo
plt.figure(figsize=(15, 5))

# Gráfico 1: Datos originales con ajuste exponencial
plt.subplot(1, 3, 1)
plt.scatter(tiempo, temperatura, color='red', s=100, label='Datos observados', zorder=5)

# Curva suave para la regresión exponencial
tiempo_smooth = np.linspace(0, 12, 100)
temp_smooth_manual = a_manual * np.exp(b_manual * tiempo_smooth)
temp_smooth_scipy = modelo_exponencial(tiempo_smooth, a_scipy, b_scipy)

plt.plot(tiempo_smooth, temp_smooth_manual, 'b-', linewidth=2, 
         label=f'Manual: y = {a_manual:.1f}e^({b_manual:.3f}x)')
plt.plot(tiempo_smooth, temp_smooth_scipy, 'g--', linewidth=2, 
         label=f'Scipy: y = {a_scipy:.1f}e^({b_scipy:.3f}x)')

plt.scatter([tiempo_10], [temp_10_manual], color='blue', s=150, 
           label=f'Pred. 10 min: {temp_10_manual:.1f}°C', zorder=5)

plt.xlabel('Tiempo (minutos)')
plt.ylabel('Temperatura (°C)')
plt.title('Regresión Exponencial - Datos Originales')
plt.legend()
plt.grid(True, alpha=0.3)

# Gráfico 2: Datos linearizados
plt.subplot(1, 3, 2)
plt.scatter(tiempo, ln_temperatura, color='red', s=100, label='ln(Temperatura)', zorder=5)
plt.plot(tiempo, modelo_exp.intercept_ + modelo_exp.coef_[0] * tiempo, 'b-', 
         linewidth=2, label='Regresión lineal')

plt.xlabel('Tiempo (minutos)')
plt.ylabel('ln(Temperatura)')
plt.title('Datos Linearizados')
plt.legend()
plt.grid(True, alpha=0.3)

# Gráfico 3: Residuos
plt.subplot(1, 3, 3)
residuos_manual = temperatura - y_pred_manual
residuos_scipy = temperatura - y_pred_scipy

plt.scatter(tiempo, residuos_manual, color='blue', s=100, 
           label=f'Manual (σ={np.std(residuos_manual):.3f})', zorder=5)
plt.scatter(tiempo, residuos_scipy, color='green', s=100, 
           label=f'Scipy (σ={np.std(residuos_scipy):.3f})', zorder=5)
plt.axhline(y=0, color='black', linestyle='-', alpha=0.5)

plt.xlabel('Tiempo (minutos)')
plt.ylabel('Residuos')
plt.title('Análisis de Residuos')
plt.legend()
plt.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()

# Tabla de resultados detallada
print("\nTabla de cálculos:")
print("x\ty\tln(y)\tx²\tx*ln(y)\ty_pred_manual\ty_pred_scipy\tresiduo_manual\tresiduo_scipy")
for i in range(len(tiempo)):
    x, y = tiempo[i], temperatura[i]
    ln_y = np.log(y)
    y_pred_m = a_manual * np.exp(b_manual * x)
    y_pred_s = modelo_exponencial(x, a_scipy, b_scipy)
    res_m = y - y_pred_m
    res_s = y - y_pred_s
    print(f"{x}\t{y}\t{ln_y:.3f}\t{x**2}\t{x*ln_y:.3f}\t{y_pred_m:.2f}\t\t{y_pred_s:.2f}\t\t{res_m:.3f}\t\t{res_s:.3f}")

# Evaluación de la calidad del modelo
print(f"\nEvaluación del modelo:")
print(f"RMSE Manual: {np.sqrt(np.mean(residuos_manual**2)):.3f}")
print(f"RMSE Scipy: {np.sqrt(np.mean(residuos_scipy**2)):.3f}")
print(f"MAE Manual: {np.mean(np.abs(residuos_manual)):.3f}")
print(f"MAE Scipy: {np.mean(np.abs(residuos_scipy)):.3f}")
                    </div>
                </div>
            </div>

            <div id="graph3" class="tab-content">
                <div class="chart-container">
                    <canvas id="chart3"></canvas>
                </div>
                <button class="btn btn-success" onclick="generateChart3()">Generar Gráfico</button>
                <div id="results3" style="margin-top: 20px;"></div>
            </div>
        </div>

        <!-- Sección de Resumen y Comparación -->
        <div class="exercise">
            <h2 class="exercise-title">📊 Resumen y Comparación de Métodos</h2>
            
            <div class="solution-section">
                <h3>🎯 Resultados Finales</h3>
                
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Ejercicio</th>
                            <th>Modelo</th>
                            <th>Ecuación</th>
                            <th>R²</th>
                            <th>Predicción</th>
                            <th>Validez</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>1. Lineal</strong></td>
                            <td>y = a + bx</td>
                            <td>y = 20 + 5x</td>
                            <td>1.000</td>
                            <td>145°C (25 min)</td>
                            <td>Excelente</td>
                        </tr>
                        <tr>
                            <td><strong>2. Logarítmica</strong></td>
                            <td>y = a + b·ln(x)</td>
                            <td>y = 3.230 - 0.681·ln(x)</td>
                            <td>0.999</td>
                            <td>1.662 mol/L (10 min)</td>
                            <td>Muy buena</td>
                        </tr>
                        <tr>
                            <td><strong>3. Exponencial</strong></td>
                            <td>y = a·e^(bx)</td>
                            <td>y = 100.0·e^(-0.1004x)</td>
                            <td>1.000</td>
                            <td>36.7°C (10 min)</td>
                            <td>Excelente</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="manual-solution">
                <h3>🔍 Criterios de Selección del Modelo</h3>
                
                <div class="step">
                    <div class="step-title">1. Regresión Lineal</div>
                    <p><strong>Cuándo usar:</strong> Cuando existe una relación proporcional directa entre variables.</p>
                    <p><strong>Ventajas:</strong> Simple, interpretable, cálculos directos.</p>
                    <p><strong>Ejemplo:</strong> Calentamiento constante, relaciones físicas lineales.</p>
                </div>

                <div class="step">
                    <div class="step-title">2. Regresión Logarítmica</div>
                    <p><strong>Cuándo usar:</strong> Crecimiento/decaimiento que se desacelera con el tiempo.</p>
                    <p><strong>Ventajas:</strong> Buena para procesos que tienden a una asíntota.</p>
                    <p><strong>Ejemplo:</strong> Concentraciones que disminuyen, aprendizaje, saturación.</p>
                </div>

                <div class="step">
                    <div class="step-title">3. Regresión Exponencial</div>
                    <p><strong>Cuándo usar:</strong> Crecimiento/decaimiento exponencial.</p>
                    <p><strong>Ventajas:</strong> Ideal para procesos naturales exponenciales.</p>
                    <p><strong>Ejemplo:</strong> Enfriamiento, crecimiento poblacional, decaimiento radioactivo.</p>
                </div>
            </div>

            <div class="code-section">
                <h3>🛠️ Código Python Completo Integrado</h3>
                <div class="code-block">
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score
from scipy.optimize import curve_fit

class RegresionAnalyzer:
    """Clase para análisis completo de regresión"""
    
    def __init__(self):
        self.modelos = {}
        self.resultados = {}
    
    def regresion_lineal(self, x, y, nombre="Lineal"):
        """Regresión lineal: y = a + bx"""
        n = len(x)
        sum_x, sum_y = np.sum(x), np.sum(y)
        sum_xy, sum_x2 = np.sum(x * y), np.sum(x**2)
        
        b = (n * sum_xy - sum_x * sum_y) / (n * sum_x2 - sum_x**2)
        a = (sum_y - b * sum_x) / n
        
        y_pred = a + b * x
        r2 = r2_score(y, y_pred)
        
        self.modelos[nombre] = {
            'tipo': 'lineal',
            'ecuacion': f'y = {a:.3f} + {b:.3f}x',
            'coeficientes': (a, b),
            'prediccion': lambda t: a + b * t,
            'r2': r2,
            'y_pred': y_pred
        }
        
        return a, b, r2
    
    def regresion_logaritmica(self, x, y, nombre="Logarítmica"):
        """Regresión logarítmica: y = a + b*ln(x)"""
        ln_x = np.log(x)
        n = len(x)
        sum_lnx, sum_y = np.sum(ln_x), np.sum(y)
        sum_lnx_y, sum_lnx2 = np.sum(ln_x * y), np.sum(ln_x**2)
        
        b = (n * sum_lnx_y - sum_lnx * sum_y) / (n * sum_lnx2 - sum_lnx**2)
        a = (sum_y - b * sum_lnx) / n
        
        y_pred = a + b * ln_x
        r2 = r2_score(y, y_pred)
        
        self.modelos[nombre] = {
            'tipo': 'logaritmica',
            'ecuacion': f'y = {a:.3f} + {b:.3f}ln(x)',
            'coeficientes': (a, b),
            'prediccion': lambda t: a + b * np.log(t),
            'r2': r2,
            'y_pred': y_pred
        }
        
        return a, b, r2
    
    def regresion_exponencial(self, x, y, nombre="Exponencial"):
        """Regresión exponencial: y = a * exp(bx)"""
        ln_y = np.log(y)
        n = len(x)
        sum_x, sum_lny = np.sum(x), np.sum(ln_y)
        sum_x_lny, sum_x2 = np.sum(x * ln_y), np.sum(x**2)
        
        b = (n * sum_x_lny - sum_x * sum_lny) / (n * sum_x2 - sum_x**2)
        A = (sum_lny - b * sum_x) / n
        a = np.exp(A)
        
        y_pred = a * np.exp(b * x)
        r2 = r2_score(y, y_pred)
        
        self.modelos[nombre] = {
            'tipo': 'exponencial',
            'ecuacion': f'y = {a:.3f} * exp({b:.4f}x)',
            'coeficientes': (a, b),
            'prediccion': lambda t: a * np.exp(b * t),
            'r2': r2,
            'y_pred': y_pred
        }
        
        return a, b, r2
    
    def comparar_modelos(self):
        """Compara todos los modelos ajustados"""
        print("=== COMPARACIÓN DE MODELOS ===")
        for nombre, modelo in self.modelos.items():
            print(f"\n{nombre}:")
            print(f"  Ecuación: {modelo['ecuacion']}")
            print(f"  R²: {modelo['r2']:.6f}")
    
    def graficar_todos(self, x, y, titulo="Comparación de Modelos"):
        """Grafica todos los modelos en una figura"""
        plt.figure(figsize=(15, 10))
        
        # Datos originales
        plt.scatter(x, y, color='red', s=100, label='Datos observados', zorder=5)
        
        # Generar puntos suaves para las curvas
        x_smooth = np.linspace(x.min(), x.max() * 1.2, 200)
        
        colores = ['blue', 'green', 'orange', 'purple']
        for i, (nombre, modelo) in enumerate(self.modelos.items()):
            try:
                y_smooth = [modelo['prediccion'](xi) for xi in x_smooth]
                plt.plot(x_smooth, y_smooth, color=colores[i % len(colores)], 
                        linewidth=2, label=f"{nombre} (R²={modelo['r2']:.4f})")
            except:
                # Para casos donde x puede ser 0 en log
                x_smooth_safe = x_smooth[x_smooth > 0]
                y_smooth = [modelo['prediccion'](xi) for xi in x_smooth_safe]
                plt.plot(x_smooth_safe, y_smooth, color=colores[i % len(colores)], 
                        linewidth=2, label=f"{nombre} (R²={modelo['r2']:.4f})")
        
        plt.xlabel('Variable Independiente (x)')
        plt.ylabel('Variable Dependiente (y)')
        plt.title(titulo)
        plt.legend()
        plt.grid(True, alpha=0.3)
        plt.show()

# Ejemplo de uso completo
def ejemplo_completo():
    """Ejemplo que resuelve los tres ejercicios"""
    
    # Crear analizador
    analyzer = RegresionAnalyzer()
    
    # Ejercicio 1: Datos lineales
    print("=" * 50)
    print("EJERCICIO 1: REGRESIÓN LINEAL")
    print("=" * 50)
    tiempo1 = np.array([0, 5, 10, 15, 20])
    temp1 = np.array([20, 45, 70, 95, 120])
    
    a1, b1, r2_1 = analyzer.regresion_lineal(tiempo1, temp1, "Lineal")
    print(f"Ecuación: y = {a1:.3f} + {b1:.3f}x")
    print(f"R² = {r2_1:.6f}")
    print(f"Predicción a x=25: {a1 + b1*25:.1f}")
    
    # Ejercicio 2: Datos logarítmicos
    print("\n" + "=" * 50)
    print("EJERCICIO 2: REGRESIÓN LOGARÍTMICA")
    print("=" * 50)
    tiempo2 = np.array([1, 2, 4, 6, 8])
    conc2 = np.array([3.2, 2.8, 2.3, 2.0, 1.8])
    
    a2, b2, r2_2 = analyzer.regresion_logaritmica(tiempo2, conc2, "Logarítmica")
    print(f"Ecuación: y = {a2:.3f} + {b2:.3f}ln(x)")
    print(f"R² = {r2_2:.6f}")
    print(f"Predicción a x=10: {a2 + b2*np.log(10):.3f}")
    
    # Ejercicio 3: Datos exponenciales
    print("\n" + "=" * 50)
    print("EJERCICIO 3: REGRESIÓN EXPONENCIAL")
    print("=" * 50)
    tiempo3 = np.array([0, 2, 4, 6, 8])
    temp3 = np.array([100, 81.9, 67.0, 54.8, 44.8])
    
    a3, b3, r2_3 = analyzer.regresion_exponencial(tiempo3, temp3, "Exponencial")
    print(f"Ecuación: y = {a3:.3f} * exp({b3:.4f}x)")
    print(f"R² = {r2_3:.6f}")
    print(f"Predicción a x=10: {a3 * np.exp(b3*10):.1f}")
    
    # Comparación final
    print("\n" + "=" * 50)
    print("RESUMEN COMPARATIVO")
    print("=" * 50)
    analyzer.comparar_modelos()

# Ejecutar ejemplo
if __name__ == "__main__":
    ejemplo_completo()
                </div>
            </div>
        </div>
    </div>

    <script>
        // Funciones para cambiar entre pestañas
        function showTab(tabId, element) {
            // Encontrar el contenedor padre del ejercicio
            const exerciseContainer = element.closest('.exercise');
            
            // Ocultar todas las pestañas de este ejercicio
            const tabContents = exerciseContainer.querySelectorAll('.tab-content');
            const navTabs = exerciseContainer.querySelectorAll('.nav-tab');
            
            tabContents.forEach(tab => tab.classList.remove('active'));
            navTabs.forEach(tab => tab.classList.remove('active'));
            
            // Mostrar la pestaña seleccionada
            document.getElementById(tabId).classList.add('active');
            element.classList.add('active');
        }

        // Función para generar gráfico del ejercicio 1
        function generateChart1() {
            const ctx = document.getElementById('chart1');
            if (!ctx) {
                console.error('Canvas chart1 no encontrado');
                return;
            }
            
            const chart1Context = ctx.getContext('2d');
            
            // Limpiar gráfico existente si existe
            if (window.chart1Instance) {
                window.chart1Instance.destroy();
            }
            
            // Datos del ejercicio 1
            const tiempo = [0, 5, 10, 15, 20];
            const temperatura = [20, 45, 70, 95, 120];
            
            // Cálculos de regresión lineal
            const n = tiempo.length;
            const sumX = tiempo.reduce((a, b) => a + b, 0);
            const sumY = temperatura.reduce((a, b) => a + b, 0);
            const sumXY = tiempo.reduce((sum, x, i) => sum + x * temperatura[i], 0);
            const sumX2 = tiempo.reduce((sum, x) => sum + x * x, 0);
            
            const b = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
            const a = (sumY - b * sumX) / n;
            
            // Calcular R²
            const yMean = sumY / n;
            const yPred = tiempo.map(x => a + b * x);
            const ssTot = temperatura.reduce((sum, y) => sum + Math.pow(y - yMean, 2), 0);
            const ssRes = temperatura.reduce((sum, y, i) => sum + Math.pow(y - yPred[i], 2), 0);
            const r2 = 1 - (ssRes / ssTot);
            
            // Predicción a los 25 minutos
            const pred25 = a + b * 25;
            
            // Datos para la línea de regresión (extendida)
            const tiempoExtendido = [];
            const tempRegresion = [];
            for (let x = 0; x <= 30; x += 0.5) {
                tiempoExtendido.push(x);
                tempRegresion.push(a + b * x);
            }
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Datos Observados',
                        data: tiempo.map((x, i) => ({x: x, y: temperatura[i]})),
                        backgroundColor: 'rgba(255, 99, 132, 1)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }, {
                        label: `Regresión Lineal: y = ${a.toFixed(1)} + ${b.toFixed(1)}x`,
                        data: tiempoExtendido.map((x, i) => ({x: x, y: tempRegresion[i]})),
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        borderWidth: 3,
                        pointRadius: 0,
                        type: 'line',
                        tension: 0
                    }, {
                        label: `Predicción 25 min: ${pred25.toFixed(1)}°C`,
                        data: [{x: 25, y: pred25}],
                        backgroundColor: 'rgba(75, 192, 192, 1)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        pointRadius: 12,
                        pointHoverRadius: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Ejercicio 1: Regresión Lineal - Temperatura vs Tiempo',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Tiempo (minutos)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 0,
                            max: 30
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Temperatura (°C)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 0
                        }
                    }
                }
            });
            
            // Mostrar resultados
            document.getElementById('results1').innerHTML = `
                <div class="solution-section">
                    <h4>📊 Resultados del Análisis</h4>
                    <p><strong>Ecuación:</strong> y = ${a.toFixed(3)} + ${b.toFixed(3)}x</p>
                    <p><strong>Coeficiente de determinación:</strong> R² = ${r2.toFixed(6)}</p>
                    <p><strong>Predicción a los 25 minutos:</strong> ${pred25.toFixed(1)}°C</p>
                    <p><strong>Interpretación:</strong> Por cada minuto que pasa, la temperatura aumenta ${b.toFixed(1)}°C</p>
                </div>
            `;
        }

        // Función para generar gráfico del ejercicio 2
        function generateChart2() {
            const ctx = document.getElementById('chart2').getContext('2d');
            
            // Datos del ejercicio 2
            const tiempo = [1, 2, 4, 6, 8];
            const concentracion = [3.2, 2.8, 2.3, 2.0, 1.8];
            
            // Transformación logarítmica
            const lnTiempo = tiempo.map(x => Math.log(x));
            
            // Cálculos de regresión logarítmica
            const n = tiempo.length;
            const sumLnX = lnTiempo.reduce((a, b) => a + b, 0);
            const sumY = concentracion.reduce((a, b) => a + b, 0);
            const sumLnXY = lnTiempo.reduce((sum, lnx, i) => sum + lnx * concentracion[i], 0);
            const sumLnX2 = lnTiempo.reduce((sum, lnx) => sum + lnx * lnx, 0);
            
            const b = (n * sumLnXY - sumLnX * sumY) / (n * sumLnX2 - sumLnX * sumLnX);
            const a = (sumY - b * sumLnX) / n;
            
            // Calcular R²
            const yMean = sumY / n;
            const yPred = lnTiempo.map(lnx => a + b * lnx);
            const ssTot = concentracion.reduce((sum, y) => sum + Math.pow(y - yMean, 2), 0);
            const ssRes = concentracion.reduce((sum, y, i) => sum + Math.pow(y - yPred[i], 2), 0);
            const r2 = 1 - (ssRes / ssTot);
            
            // Predicción a los 10 minutos
            const pred10 = a + b * Math.log(10);
            
            // Datos para la curva de regresión
            const tiempoExtendido = [];
            const concRegresion = [];
            for (let x = 0.5; x <= 12; x += 0.1) {
                tiempoExtendido.push(x);
                concRegresion.push(a + b * Math.log(x));
            }
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Datos Observados',
                        data: tiempo.map((x, i) => ({x: x, y: concentracion[i]})),
                        backgroundColor: 'rgba(255, 99, 132, 1)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }, {
                        label: `Regresión Logarítmica: y = ${a.toFixed(3)} + ${b.toFixed(3)}ln(x)`,
                        data: tiempoExtendido.map((x, i) => ({x: x, y: concRegresion[i]})),
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        borderWidth: 3,
                        pointRadius: 0,
                        type: 'line',
                        tension: 0.2
                    }, {
                        label: `Predicción 10 min: ${pred10.toFixed(3)} mol/L`,
                        data: [{x: 10, y: pred10}],
                        backgroundColor: 'rgba(75, 192, 192, 1)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        pointRadius: 12,
                        pointHoverRadius: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Ejercicio 2: Regresión Logarítmica - Concentración vs Tiempo',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Tiempo (minutos)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 0,
                            max: 12
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Concentración (mol/L)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 1.0
                        }
                    }
                }
            });
            
            // Mostrar resultados
            document.getElementById('results2').innerHTML = `
                <div class="solution-section">
                    <h4>📊 Resultados del Análisis</h4>
                    <p><strong>Ecuación:</strong> y = ${a.toFixed(3)} + ${b.toFixed(3)}ln(x)</p>
                    <p><strong>Coeficiente de determinación:</strong> R² = ${r2.toFixed(6)}</p>
                    <p><strong>Predicción a los 10 minutos:</strong> ${pred10.toFixed(3)} mol/L</p>
                    <p><strong>Interpretación:</strong> La concentración disminuye logarítmicamente con el tiempo</p>
                </div>
            `;
        }

        // Función para generar gráfico del ejercicio 3
        function generateChart3() {
            const ctx = document.getElementById('chart3').getContext('2d');
            
            // Datos del ejercicio 3
            const tiempo = [0, 2, 4, 6, 8];
            const temperatura = [100, 81.9, 67.0, 54.8, 44.8];
            
            // Transformación logarítmica para linearización
            const lnTemperatura = temperatura.map(y => Math.log(y));
            
            // Cálculos de regresión exponencial
            const n = tiempo.length;
            const sumX = tiempo.reduce((a, b) => a + b, 0);
            const sumLnY = lnTemperatura.reduce((a, b) => a + b, 0);
            const sumXLnY = tiempo.reduce((sum, x, i) => sum + x * lnTemperatura[i], 0);
            const sumX2 = tiempo.reduce((sum, x) => sum + x * x, 0);
            
            const b = (n * sumXLnY - sumX * sumLnY) / (n * sumX2 - sumX * sumX);
            const A = (sumLnY - b * sumX) / n;
            const a = Math.exp(A);
            
            // Calcular R²
            const yMean = temperatura.reduce((a, b) => a + b, 0) / n;
            const yPred = tiempo.map(x => a * Math.exp(b * x));
            const ssTot = temperatura.reduce((sum, y) => sum + Math.pow(y - yMean, 2), 0);
            const ssRes = temperatura.reduce((sum, y, i) => sum + Math.pow(y - yPred[i], 2), 0);
            const r2 = 1 - (ssRes / ssTot);
            
            // Predicción a los 10 minutos
            const pred10 = a * Math.exp(b * 10);
            
            // Datos para la curva de regresión
            const tiempoExtendido = [];
            const tempRegresion = [];
            for (let x = 0; x <= 12; x += 0.1) {
                tiempoExtendido.push(x);
                tempRegresion.push(a * Math.exp(b * x));
            }
            
            new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Datos Observados',
                        data: tiempo.map((x, i) => ({x: x, y: temperatura[i]})),
                        backgroundColor: 'rgba(255, 99, 132, 1)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        pointRadius: 8,
                        pointHoverRadius: 10
                    }, {
                        label: `Regresión Exponencial: y = ${a.toFixed(1)}e^(${b.toFixed(4)}x)`,
                        data: tiempoExtendido.map((x, i) => ({x: x, y: tempRegresion[i]})),
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        borderWidth: 3,
                        pointRadius: 0,
                        type: 'line',
                        tension: 0.2
                    }, {
                        label: `Predicción 10 min: ${pred10.toFixed(1)}°C`,
                        data: [{x: 10, y: pred10}],
                        backgroundColor: 'rgba(75, 192, 192, 1)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        pointRadius: 12,
                        pointHoverRadius: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Ejercicio 3: Regresión Exponencial - Enfriamiento vs Tiempo',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Tiempo (minutos)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 0,
                            max: 12
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Temperatura (°C)',
                                font: { size: 14, weight: 'bold' }
                            },
                            min: 0
                        }
                    }
                }
            });
            
            // Mostrar resultados
            document.getElementById('results3').innerHTML = `
                <div class="solution-section">
                    <h4>📊 Resultados del Análisis</h4>
                    <p><strong>Ecuación:</strong> y = ${a.toFixed(1)} × e^(${b.toFixed(4)}x)</p>
                    <p><strong>Coeficiente de determinación:</strong> R² = ${r2.toFixed(6)}</p>
                    <p><strong>Predicción a los 10 minutos:</strong> ${pred10.toFixed(1)}°C</p>
                    <p><strong>Interpretación:</strong> Enfriamiento exponencial típico de la Ley de Newton</p>
                    <p><strong>Constante de enfriamiento:</strong> k = ${(-b).toFixed(4)} min⁻¹</p>
                </div>
            `;
        }

        // Función para mostrar/ocultar código
        function toggleCode(element) {
            const codeBlock = element.nextElementSibling;
            if (codeBlock.style.display === 'none') {
                codeBlock.style.display = 'block';
                element.textContent = 'Ocultar Código';
            } else {
                codeBlock.style.display = 'none';
                element.textContent = 'Mostrar Código';
            }
        }

        // Generar gráficos automáticamente al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            // Esperar un poco para que Chart.js se cargue completamente
            setTimeout(() => {
                generateChart1();
                generateChart2();
                generateChart3();
            }, 1000);
        });

        // Añadir funcionalidad de scroll suave
        function scrollToExercise(num) {
            document.getElementById(`exercise${num}`).scrollIntoView({
                behavior: 'smooth'
            });
        }

        // Función para calcular regresión en tiempo real
        function calculateRegression(type, xData, yData) {
            const results = {};
            
            switch(type) {
                case 'linear':
                    // Implementar cálculo lineal
                    break;
                case 'logarithmic':
                    // Implementar cálculo logarítmico
                    break;
                case 'exponential':
                    // Implementar cálculo exponencial
                    break;
            }
            
            return results;
        }

        // Función para exportar resultados
        function exportResults() {
            const results = {
                ejercicio1: {
                    tipo: 'Regresión Lineal',
                    ecuacion: 'y = 20 + 5x',
                    r2: 1.000,
                    prediccion: '145°C a los 25 minutos'
                },
                ejercicio2: {
                    tipo: 'Regresión Logarítmica',
                    ecuacion: 'y = 3.230 - 0.681ln(x)',
                    r2: 0.999,
                    prediccion: '1.662 mol/L a los 10 minutos'
                },
                ejercicio3: {
                    tipo: 'Regresión Exponencial',
                    ecuacion: 'y = 100.0 × e^(-0.1004x)',
                    r2: 1.000,
                    prediccion: '36.7°C a los 10 minutos'
                }
            };
            
            const dataStr = JSON.stringify(results, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'resultados_regresion.json';
            link.click();
        }
    </script>
</body>
</html>